(function () {function g(e,n,t,r,i,s,o){try{var a=e[s](o),c=a.value}catch(u){return void t(u)}a.done?n(c):Promise.resolve(c).then(r,i)}function h(e){return function(){var n=this,t=arguments;return new Promise(function(r,i){var s=e.apply(n,t);function o(e){g(s,r,i,o,a,"next",e)}function a(e){g(s,r,i,o,a,"throw",e)}o(void 0)})}}var d={props:{item:function(){return{type:Object,default:{}}}},computed:{itemlink:function(){return"archive.org"==this.item.type?this.item.data.url:this.item.target},itemclass:function(){return"archive.org"==this.item.type||"pingback"==this.item.type||"webmention"==this.item.type?"k-list-item-sendmentions-sent":"k-list-item-sendmentions-failed"},type_formatted:function(){switch(this.item.type){case"none":return"";case"webmention":return this.item.type+": "+this.item.data.response;default:return this.item.type;}},icon:function(){switch(this.item.type){case"webmention":return"sendmentions-webmention";case"pingback":return"globe";case"archive.org":return"sendmentions-archiveorg";case"none":return"cancel";default:return"circle-outline";}},options:function(){return[{icon:"refresh",text:"Resend",click:"resend"}]}}};if(typeof d==="function"){d=d.options}Object.assign(d,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("li",{staticClass:"k-list-item",class:_vm.itemclass},[_c("div",{staticClass:"k-list-item-content"},[_c("a",{staticClass:"k-link k-list-item-content",attrs:{"href":_vm.itemlink,"target":"_blank"}},[_c("span",{staticClass:"k-list-item-image"},[_c("k-icon",{attrs:{"type":_vm.icon}})],1),_vm._v(" "),_c("span",{staticClass:"k-list-item-text"},[_c("em",{domProps:{"innerHTML":_vm._s(_vm.item.target)}}),_vm._v(" "),_c("small",{domProps:{"innerHTML":_vm._s(_vm.type_formatted)}})])])]),_vm._v(" "),_c("nav",{staticClass:"k-list-item-options"},[true?_c("k-button",{attrs:{"tooltip":_vm.$t("resend"),"icon":"refresh","alt":_vm.Resend},on:{"click":function($event){$event.stopPropagation();return _vm.$emit("action","resend",_vm.item.pageid,_vm.item.target,_vm.item.type)}}}):_vm._e()],1)])};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());var f={};if(typeof f==="function"){f=f.options}Object.assign(f,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("ul",{staticClass:"k-list"},[_vm._t("default")],2)};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());var b={extends:"k-info-section",components:{"k-sendmentions-list":f,"k-sendmentions-item":d},props:{name:String,parent:String},data:function(){return{headline:null,sendmentions:[],empty:null,sendmentionsSystemErrors:[]}},created:function(){var e=this;this.load().then(function(n){e.headline=n.headline,e.sendmentions=n.sendmentions,e.empty=n.empty,e.sendmentionsSystemErrors=n.sendmentionsSystemErrors})},methods:{load:function(){return this.$api.get(this.parent+"/sections/"+this.name)},action:function(e,n,t,r){"resend"===e&&this.resend(n,t,r)},resend:function(e,n,t){var r=this;return h(regeneratorRuntime.mark(function i(){var s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return e=e.replace(/\//,"+"),s="sendmentions/".concat(e),i.next=4,r.$api.patch(s,{target:n,type:t});case 4:return i.sent,i.next=7,r.load().then(function(e){return r.sendmentions=e.sendmentions});case 7:r.$store.dispatch("notification/success",":)");case 8:case"end":return i.stop();}},i)}))()}}};if(typeof b==="function"){b=b.options}Object.assign(b,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("section",{staticClass:"k-sendmentions-section k-section"},[_c("header",{staticClass:"k-section-header"},[_c("k-headline",[_vm._v(_vm._s(_vm.headline))])],1),_vm._v(" "),_vm._l(_vm.sendmentionsSystemErrors,function(error){return _c("k-box",{key:error.id,attrs:{"theme":error.theme}},[_c("k-text",{attrs:{"size":"small"},domProps:{"innerHTML":_vm._s(error.message)}})],1)}),_vm._v(" "),_vm.sendmentions.length>0?_c("k-sendmentions-list",_vm._l(_vm.sendmentions,function(item){return _c("k-sendmentions-item",{key:item.uid,attrs:{"item":item},on:{"action":_vm.action}})}),1):_c("k-empty",{attrs:{"layout":"list","icon":"globe"}},[_vm._v(" "+_vm._s(_vm.empty)+" ")])],2)};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());panel.plugin("sgkirby/sendmentions",{sections:{sendmentions:b,pings:b},icons:{"sendmentions-webmention":"<polygon fill-rule=\"nonzero\" points=\"9.23775281 14.8085393 7.34377528 9.01793258 7.31235955 9.01793258 5.45002247 14.8085393 2.96193258 14.8085393 0.00413483146 3.62759551 2.4611236 3.62759551 4.2294382 11.2382921 4.26067416 11.2382921 6.20139326 5.44750562 8.50202247 5.44750562 10.411191 11.3318652 10.4425618 11.3318652 11.8070562 5.45137079 10.0297079 5.44750562 13.7139775 2.02314607 16 5.45191011 14.189618 5.45078652 11.6785169 14.8085393\"></polygon>","sendmentions-archiveorg":"<path d=\"M15.5 1.8l-.3.5H.5l-.3-.5L8 0zm-.3 1H.5v1.4h14.7zm-1.8 7.7v1.3l.1 1.6.2.1q.6.2 1.3 0 .3-4.1 0-8.8-.8-.2-1.5 0v1.1l-.1 1v3.7zm-12.5.7v2.3H1.3l.2.1h1v-.1-.6l.1-1.9V9v-.8-.8-.8-.9-1H1v.8l-.1.2V11.2zm4 1.1v.7l.1.2v.3h.2l.1.1h1.1v-.1l.1-.6V11l.1-1V9 5.8l-.1-1H5L5 5v1.2l-.1.7v5.4zm6.2-6.8v-.7l-.4-.2-1 .1-.2 1.4V13l.1.6h.2l.2.1h1v-.1-.4l.1-.3v-2l.1-.8V9 7.8v-1-1.2zM.6 15h14.8V14H.6zM0 16h16v-.7H0z\"></path>"}});})();